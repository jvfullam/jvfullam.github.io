<!doctype html>
<html>
  <head>
    <title>CS 416</title>
  </head>
  <body>
    <h1>Narrative Visualization Project</h1>
	<p>Data
	  <ul><a href="https://fred.stlouisfed.org/series/MORTGAGE30US">Average 30-Year Fixed Rate Mortgage</a></ul>
	  <ul><a href="https://fred.stlouisfed.org/series/CPIAUCSL">Consumer Price Index</a></ul>
	  <ul><a href="https://fred.stlouisfed.org/series/MSPUS">Median Sales Price</a></ul>
	</p>
	<svg id="scene1"></svg>
  </body>
  <style>
  body {
    max-width: 800px;
	margin: auto;
  }
  </style>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
  var width = 600;
  var height = 400;
  
  var svg = d3.select("#scene1").attr("width", width).attr("height", height);
  
  var padding = {top: 10, right: 10, bottom: 30, left: 50};
  width -= (padding.left + padding.right);
  height -= (padding.top + padding.bottom);
  
  svg = svg.append("g").attr("transform", "translate(" + padding.left + ", " + padding.top + ")");
  
  var MSP = d3.csv("https://jvfullam.github.io/cs416/MSP.csv", r => { 
	return {date: d3.timeParse("%Y-%m-%d")(r.DATE), price: parseFloat(r.MSPUS)};
  });
  
  MSP.then(data => {
	var x = d3.scaleTime()
	  .domain(d3.extent(data, d => d.date))
      .range([0, width]);
	svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));
	
	var y = d3.scaleLinear()
	  .domain([0, d3.max(data, d => d.price)])
      .range([height, 0]);
	svg.append("g")
      .call(d3.axisLeft(y));
	
	svg.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("stroke", "steelblue")
      .attr("stroke-width", 1.5)
      .attr("d", d3.line()
        .x(d => x(d.date))
        .y(d => y(d.price))
      );
  });
  </script>
</html>